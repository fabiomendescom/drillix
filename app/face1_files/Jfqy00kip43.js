/*!CK:1592680326!*//*1424661676,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["s4mUd"]); }

__d("TagExpansionButtonConfig",[],function(a,b,c,d,e,f){e.exports={FRIENDS_OF_TAGGED:"friends_of_tagged",TAGGED_ONLY:"tagged_only"};},null);
__d("XAdPreferencesCategoryInfoController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("\/ads\/preferences\/category_info\/",{ad_id:{type:"Int",required:true},category_fbid:{type:"Int",required:true}});},null);
__d("AdsPreferencesInterestListItem.react",["AdPreferencesDesktopStrings","AsyncRequest","Image.react","Layout.react","xuiglyph","React","ReactLayeredComponentMixin","XAdPreferencesCategoryInfoController","XUIContextualDialog.react","XUIContextualDialogTitle.react","XUIContextualDialogBody.react","XUIText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=j.Column,v=j.FillColumn,w=l.createClass({displayName:"AdsPreferencesInterestListItem",mixins:[m],propTypes:{adID:l.PropTypes.number.isRequired,interest:l.PropTypes.object.isRequired,isListItem:l.PropTypes.bool.isRequired,onInterestClick:l.PropTypes.func.isRequired,removed:l.PropTypes.bool.isRequired,setDialog:l.PropTypes.func,setReportDialog:l.PropTypes.func},getInitialState:function(){return {xHover:false,iHover:false,interestHover:false,enterTimeout:-1,suggestions:{}};},_xHover:function(event){this.setState({xHover:!this.state.xHover});},_xOver:function(event){this.setState({xHover:true});},_iHover:function(event){this.setState({iHover:!this.state.iHover});},_interestHover:function(x){this.setState({interestHover:x});},_interestEnter:function(event,x,y){if(y){this._interestHover(true);}else{var z=setTimeout(this._interestEnter.bind(this,true,true,true),250);this.setState({enterTimeout:z});}},_interestLeave:function(event){this._interestHover(false);clearTimeout(this.state.enterTimeout);},_handleInterestClick:function(event){var x=this.refs['toggle_'+this.props.interest.id];this.props.onInterestClick(this.props.interest,this.props.removed,x);},_onInterestTextClick:function(event){if(this.state.suggestions>0&&this.props.setDialog){this.props.setDialog(this.props.interest,this.state.suggestions);}else{var x=n.getURIBuilder().setInt('ad_id',this.props.adID).setInt('category_fbid',this.props.interest.id).getURI();new h(x).setHandler(function(y){var z=y.payload,aa=z.suggestions,ba=this.props.interest;if(!ba.description)ba.description="This is a preference you added.";this.setState({suggestions:aa});if(this.props.setDialog)this.props.setDialog(ba,z.suggestions);}.bind(this)).send();}},_onReportPreferenceClick:function(event){if(this.props.setReportDialog)this.props.setReportDialog(this.props.interest);},render:function(){var x=((this.state.iHover?"hidden_elem":'')),y=((!this.state.iHover?"hidden_elem":'')),z=((this.state.interestHover&&this.props.isListItem?"_2imp":'')+(!this.state.interestHover&&this.props.isListItem?' '+"_2imq":'')+(this.props.removed?' '+"hidden_elem":'')),aa=!this.props.isListItem?null:l.createElement("span",{className:z,ref:this.props.interest.name,onMouseEnter:this._iHover,onMouseLeave:this._iHover},l.createElement(i,{className:x,src:k({name:'info-solid',shade:'light',size:'medium'})}),l.createElement(i,{className:y,src:k({name:'info-solid',shade:'dark',size:'medium'})})),ba=l.createElement("span",{className:z,onMouseEnter:this._xHover,onMouseLeave:this._xHover,onMouseMove:this._xOver},l.createElement(i,{className:((this.state.xHover?"hidden_elem":'')),src:k({name:'cross',shade:'dark'})}),l.createElement(i,{className:((!this.state.xHover?"hidden_elem":'')),src:k({name:'cross',shade:'accent'})})),ca=l.createElement("div",{className:"_2imr"},l.createElement("a",{href:"#"},"Undo")),da=l.createElement(r,{className:((this.props.removed?"_2ims":'')),size:"small",weight:"bold","data-fbid":this.props.interest.id},this.props.interest.name),ea=(!this.props.isListItem||this.props.removed)?da:l.createElement("a",{onClick:this._onInterestTextClick},da),fa=(("_2imt")+(!this.props.isListItem?' '+"_2imu":'')),ga=l.createElement(v,null,l.createElement("a",{onClick:this._onReportPreferenceClick,className:z},l.createElement(r,{size:"small",weight:"bold"},"[FB-Only] Report"))),ha=(this.props.isListItem&&this.props.setReportDialog)?ga:null;return (l.createElement("li",{className:fa,onMouseEnter:this._interestEnter,onMouseLeave:this._interestLeave},l.createElement(j,null,l.createElement(v,null,ea,l.createElement("span",{className:"_2imv"},aa)),ha,l.createElement(u,{className:"mlm"},l.createElement("div",{onClick:this._handleInterestClick,className:"_2imw",ref:'toggle_'+this.props.interest.id},!this.props.removed?ba:ca)))));},renderLayers:function(){var x=this.props.interest.description?this.props.interest.description:"This is a preference you added.";return {contextualDialog:l.createElement(o,{contextRef:this.props.interest.name,shown:this.state.iHover,position:"above",focusContextOnHide:false,width:o.WIDTH.NORMAL},l.createElement(p,null,g.about_this_ads_preference),l.createElement(q,null,x))};}});e.exports=w;},null);
__d("XAdPreferencesInterestsWriteController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("\/ads\/preferences\/edit_interests\/",{ad_id:{type:"Int",required:true},action:{type:"Enum",required:true,enumType:1},type:{type:"Enum",required:true,enumType:1},fbids:{type:"IntVector",required:true}});},null);
__d("XAdPreferencesNUXController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("\/ads\/preferences\/nux\/",{type:{type:"String",required:true}});},null);
__d("XAdsPreferencesFeedbackController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("\/ads\/preferences\/feeedback\/",{ad_id:{type:"Int",required:true},favorite:{type:"Enum",required:true,enumType:1}});},null);
__d("AdsPrefs",["AsyncRequest","AdsPreferencesInterestListItem.react","CSS","DOM","React","Event","tidyEvent","cx","csx","XAdPreferencesInterestsWriteController","XAdPreferencesNUXController","XAdsPreferencesFeedbackController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(w,x){i.toggleClass(w,"hidden_elem");var y=i.hasClass(w,"hidden_elem")?'ad_useful':'ad_neutral',z=r.getURIBuilder().setInt('ad_id',x).setEnum('favorite',y).getURI(),aa=new g(z);aa.send();}function t(){var w=q.getURIBuilder().setString('type','interest_nux_ts').getURI();new g(w).send();}function u(w,x,y){var z=x?'add':'del',aa=p.getURIBuilder().setInt('ad_id',w.adID).setEnum('action',z).setEnum('type','interest').setIntVector('fbids',[w.id]).getURI();new g(aa).send();k.render(k.createElement(h,{className:"_589n",adID:w.adID,interest:w,isListItem:false,onInterestClick:u,removed:!x}),document.getElementById(w.rootID));if(w.dialog&&y!=null){t();w.dialog.setContext(y);w.dialog.show();}}var v={initRHCFeedback:function(w,x,y){m(l.listen(x,'click',function(z){s(y,w);z.kill();}));},createListElement:function(w,x,y,z,aa,ba){var ca={id:x,name:y,adID:w,rootID:z,dialog:ba};k.render(k.createElement(h,{className:"_589n",adID:w,interest:ca,isListItem:false,onInterestClick:u,removed:false}),document.getElementById(z));},initExpandable:function(w){m(l.listen(w,'click',function(x){var y=j.scry(w,"div._2fdq")[0],z=j.scry(w,"._4r43")[0],aa=j.scry(w,"._1uhj")[0];i.toggleClass(z,'hidden_elem');i.toggleClass(aa,'hidden_elem');i.toggleClass(y,'hidden_elem');}));},toggleFavorite:function(w){var x=j.find(w.getRoot(),'.img');s(x,w.getLabel());}};e.exports=v;},null);
__d("EntstreamFeedObject",["CSS","Parent","cx"],function(a,b,c,d,e,f,g,h,i){var j={getRoot:function(k){return h.byClass(k,"_5jmm");},getHscrollOuterRootIfAvailable:function(k){var l=k;if(g.hasClass(l,"_170y"))l=j.getRoot(l.parentNode);return l;}};e.exports=j;},null);
__d("EntstreamFeedObjectFollowup",["CSS","DOM","EntstreamFeedObject","Event","csx","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n={getFollowup:function(o){var p=h.scry(o,"._5lum");if(!p.length)p=h.scry(o.parentNode,"._5lum");return p?p[0]:null;},initCloseButton:function(o){var p=h.find(o,"._5xsl"),q=j.listen(p,'click',function(){q.remove();h.remove(o);});o.listener=q;},stopListenCloseButton:function(o){if(o.listener)o.listener.remove();},addFollowup:function(o,p,q){var r=g.hasClass(o,"_5pat"),s=h.create('div',{className:"_5lum"});if(r){g.addClass(s,"_5pau");}else g.addClass(s,"_1f84");if(q)g.addClass(s,q);if(p){h.appendContent(s,p);this.initCloseButton(s);h.insertBefore(o,s);}else{var t=n.getFollowup(o);if(t)this.removeFollowup(t);h.prependContent(o,s);}return s;},removeFollowup:function(o){var p=n.getFollowup(o);this.stopListenCloseButton(p);h.remove(p);},appendToFollowup:function(o,p){var q=i.getRoot(m(o)),r=n.getFollowup(q);h.appendContent(r,p);},getFollowupMessage:function(o){var p=h.find(o,"._1f86");return p;},replaceFollowupMessage:function(o,p){this.stopListenCloseButton(o);var q=n.getFollowupMessage(o);h.replace(q,p);this.initCloseButton(o);}};e.exports=n;},null);
__d("EntstreamFeedObjectDigest",["DOM","EntstreamFeedObject","EntstreamFeedObjectFollowup","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k){var l={toggleDigest:function(m,n,o){var p=m.getValue()==='digest_on'?o.digest_off:o.digest_on,q=h.getRoot(k(n)),r=i.getFollowup(q);if(r){var s=i.getFollowupMessage(r);g.replace(s,p);}else i.addFollowup(q,p,"_521o");}};e.exports=l;},null);
__d("EntstreamFeedObjectFollow",["EntstreamFeedObject","EntstreamFeedObjectFollowup","Event","Parent","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m={toggleFollow:function(n,o,p){var q=n.getValue()=='follow_post'?p.follow_post:p.unfollow_post,r=g.getRoot(l(o)),s=h.getFollowup(r);if(s){h.replaceFollowupMessage(s,q);}else{s=h.addFollowup(r,q,"_521o")||h.getFollowup(r);i.listen(s,'click',function(event){var t=event.getTarget(),u="_1f89";if(j.byClass(t,u)){m.toggleFollow(n,o,p);n.toggleMenuItem();}});}}};e.exports=m;},null);
__d("EntstreamFeedObjectHide",["Event","CSS","EntstreamFeedObject","EntstreamFeedObjectFollowup","Focus","TabbableElements","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o={hide:function(p,q){var r=i.getRoot(n(p));r=i.getHscrollOuterRootIfAvailable(r);j.addFollowup(r,q);h.addClass(r,"_i6m");o.setFocus(r);},registerUnhide:function(p,q){g.listen(p,'click',function(){if(q)q.send();var r=i.getRoot(p);r=i.getHscrollOuterRootIfAvailable(r);o.unhide(r);});},setFocus:function(p){var q=l.find(p);if(q&&q[0])k.setWithoutOutline(q[0]);},unhide:function(p){j.removeFollowup(p);h.removeClass(p,"_i6m");o.setFocus(p);}};e.exports=o;},null);
__d("YouTube",["CSS","DOM","DOMQuery","Event","Keys","LitestandStoryInsertionStatus","SubscriptionsHandler","UserAgent_DEPRECATED","Focus","copyProperties","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(s,t,u){"use strict";var v=new m();v.addSubscriptions(j.listen(s,'load',this.listening.bind(this)),l.registerBlocker(function(){return this.playerState===r.STATE_PLAYING;}.bind(this)));p(this,{iframe:s,autofocus:t,autoplay:u,playerState:r.STATE_UNSTARTED,muted:false,volume:100,currentTime:0,timer:null,handler:v});if(t)o.set(s);}r.prototype.id=function(){"use strict";return this.iframe.id;};r.prototype.post=function(s){"use strict";s.id=this.id();this.iframe.contentWindow.postMessage(JSON.stringify(s),'*');};r.prototype.listening=function(){"use strict";this.post({event:'listening'});clearTimeout(this.timer);this.timer=setTimeout(this.listening.bind(this),100);};r.prototype.update=function(s){"use strict";if(s.event=='initialDelivery'){clearTimeout(this.timer);if((n.webkit()||n.firefox())&&s.info&&s.info.debugText.match(/flashVersion/)){this.addAccessibleButtons();if(n.firefox())this.iframe.tabIndex=-1;}}if(s.info)['playerState','muted','volume','currentTime'].forEach(function(t){if(s.info.hasOwnProperty(t))this[t]=s.info[t];}.bind(this));};r.prototype.togglePlay=function(){"use strict";this.post({event:'command',func:(this.playerState==r.STATE_PLAYING)?'pauseVideo':'playVideo'});};r.prototype.toggleMute=function(){"use strict";this.post({event:'command',func:this.muted?'unMute':'mute'});};r.prototype.addAccessibleButtons=function(){"use strict";this.addAccessibleButton('Mute',"_505m",this.toggleMute.bind(this));this.addAccessibleButton('Play',"_505n",this.togglePlay.bind(this));};r.prototype.addAccessibleButton=function(s,t,u){"use strict";var v=h.create('button',{'class':t,tabindex:0},s);h.insertAfter(this.iframe,v);this.handler.addSubscriptions(j.listen(v,'click',u),j.listen(v,'mouseover',g.hide.bind(null,v)),j.listen(this.iframe,'mouseout',g.show.bind(null,v)),j.listen(v,'focus',function(){if(!this.autoplay&&this.playerState==r.STATE_UNSTARTED){this.post({event:'command',func:'playVideo'});this.post({event:'command',func:'pauseVideo'});}}.bind(this)),j.listen(v,'keydown',function(w){switch(w.keyCode){case k.UP:case k.DOWN:this.post({event:'command',func:'setVolume',args:[this.volume+((w.keyCode==k.UP)?10:-10)]});w.prevent();break;case k.RIGHT:case k.LEFT:this.post({event:'command',func:'seekTo',args:[this.currentTime+((w.keyCode==k.RIGHT)?10:-10)]});w.prevent();break;}}.bind(this)));return v;};r.prototype.destroy=function(){"use strict";this.handler.release();delete r.instances[this.id()];if(!Object.keys(r.instances).length)r.handler.remove();};r.register=function(s,t,u){"use strict";if(!window.postMessage)return;if(!Object.keys(r.instances).length)r.handler=j.listen(window,'message',function(w){try{var x=JSON.parse(w.data);if(r.instances[x.id])r.instances[x.id].update(x);}catch(w){}});var v=new r(i.find(s,'iframe'),t,u);r.instances[v.id()]=v;};p(r,{STATE_UNSTARTED:-1,STATE_PLAYING:1,instances:{},handler:null});e.exports=r;},null);
__d("EntstreamHomeFeedObjectHide",["AsyncRequest","CSS","DOM","EntstreamFeedObject","EntstreamFeedObjectHide","Event","TrackingNodes","YouTube","csx","cx","ge","fbt","$"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t={stopVideo:function(u){var v=s(u),w=i.find(v,"^._5jmm"),x=i.scry(w,'iframe');for(var y=0;y<x.length;y++){var z=n.instances[i.getID(x[y])];if(z&&(z.playerState===n.STATE_PLAYING))z.togglePlay();}var aa=i.scry(w,'video');for(var ba=0;ba<aa.length;ba++)if(('paused' in aa[ba])&&!aa[ba].paused)if(typeof aa[ba].pause==='function')aa[ba].pause();},hide:function(u,v,w,x){t.stopVideo(u);var y=j.getRoot(q(u)),z=h.hasClass(y,"_5pat"),aa;if(z&&w=='afrostart'){aa='';}else{var ba=w=='hide'||w=='afrostart'?"This story is now hidden from your News Feed.":"This story has been marked as spam.",ca=w=='hide'||w=='afrostart'?"Unhide":"Undo",da=m.getTrackingInfo(m.types.UNHIDE_LINK),ea=i.create('a',{href:'#','data-ft':da},ca),fa={};if(v)fa.token=v;if(x)fa.hideable_token=x;var ga=new g().setURI('/ajax/entstream/home/story/unhide').setMethod('POST').setData(fa).setRelativeTo(ea);k.registerUnhide(ea,ga);aa=i.create('div',{'class':"_1f86"},[ba,' ',ea]);}k.hide(u,aa);},registerHide:function(u,v,w,x){l.listen(u,'click',function(){t.hide(u.getAttribute('id'),v,w,x);});}};e.exports=t;},null);
__d("MenuTogglingItem",["DOM","MenuItem"],function(a,b,c,d,e,f,g,h){for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;function k(){"use strict";if(h!==null)h.apply(this,arguments);}k.prototype.handleClick=function(){"use strict";this.toggleMenuItem();return j.handleClick.call(this);};k.prototype.toggleMenuItem=function(){"use strict";this._swap('ajaxify','toggleAjaxify');this._swap('value','toggleValue');this._toggleItemText();};k.prototype.setValue=function(l){"use strict";this._data.value=l;};k.prototype._toggleItemText=function(){"use strict";var l=this._anchor;this._swap('markup','toggleMarkup');g.replace(l,this._renderItemContent());};k.prototype._swap=function(l,m){"use strict";var n=this._data[l];this._data[l]=this._data[m];this._data[m]=n;};e.exports=k;},null);
__d("EntstreamHomeFeedObjectOptionsMenu",["AdsPrefs","BanzaiLogger","CSS","DOM","EntstreamFeedObject","EntstreamFeedObjectDigest","EntstreamFeedObjectFollow","EntstreamHomeFeedObjectHide","MenuTogglingItem","UFICentralUpdates","UFIConstants","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(u,v,w,x,y,z,aa,ba,ca,da){u.subscribe('itemclick',function(ea,fa){var ga=fa.item.getRoot(),ha=ga.getAttribute('data-feed-option-name'),ia=i.hasClass(ga,"_50o2")||i.hasClass(ga,"_50o0");if(ha)h.log('FeedStoryOptionMenuLoggerConfig',{option_name:ha,is_secondary:ia?1:0,event_type:'clk',feed_location:aa,session_id:ba,is_sponsored:ca,is_self_story:da});if(typeof fa.item.getValue!=='function')return;switch(fa.item.getValue()){case 'hide':case 'markspam':case 'afrostart':n.hide(v,w,fa.item.getValue(),y);break;case 'afro_direct_action':var ja=k.getRoot(s(v));ja=k.getHscrollOuterRootIfAvailable(ja);var ka=fa.item.getRoot().getAttribute('data-optimistic-hide');if(ka){var la=j.create('div',{className:"_5lum"});j.appendContent(la,fa.item.getRoot().getAttribute('data-action-in-progress-string'));j.insertBefore(ja.firstChild,la);i.addClass(ja,"_i6m");}break;case 'follow_post':case 'unfollow_post':m.toggleFollow(fa.item,v,x);break;case 'ad_useful':case 'ad_neutral':g.toggleFavorite(fa.item);ea.kill();break;case 'digest_on':case 'digest_off':l.toggleDigest(fa.item,v,x);break;}}.bind(this));u.subscribe('show',function(){h.log('FeedStoryOptionMenuLoggerConfig',{option_name:'root',event_type:'clk',feed_location:aa,session_id:ba,is_sponsored:ca,is_self_story:da});var ea=i.hasClass(u.getRoot(),"_50o1"),fa=i.hasClass(u.getRoot(),"_50n_");u.forEachItem(function(ga){var ha=ga.getRoot(),ia=ha.getAttribute('data-feed-option-name'),ja=i.hasClass(ha,"_50o2"),ka=i.hasClass(ha,"_50o0"),la=i.hasClass(ha,"_50nd"),ma=i.hasClass(ha,"_50ne"),na=(ea&&ja)||(fa&&ka)||(!ea&&la)||(!fa&&ma),oa=ja||ka;if(ia&&!na)h.log('FeedStoryOptionMenuLoggerConfig',{option_name:ia,is_secondary:oa?1:0,event_type:'imp',feed_location:aa,session_id:ba,is_sponsored:ca,is_self_story:da});ga.onShow();});});p.subscribe('update-actions',function(ea,fa){if(fa.payloadsource===q.UFIPayloadSourceType.USER_ACTION){var ga=fa.actions||[];for(var ha=0;ha<ga.length;ha++)if(ga[ha].actiontype===q.UFIActionType.ADD_COMMENT_ACTION){if(ga[ha].feedbackfbid!=z)return;u.getRoot();u.forEachItem(function(ia){if(ia instanceof o&&ia.getValue()==='unfollow_post')ia.handleClick();});}}});}e.exports=t;},null);
__d("MetaComposerEdDialog",["ARIA","Animation","Arbiter","AsyncRequest","DOM","Ease","Parent","SelectorDeprecated","Vector","copyProperties","getElementText"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=null;function s(t){this._dialog=t.dialog;this.config=t;this._init();}s.init=function(t){if(r){r.config.show_audience=t.show_audience;t.dialog.destroy();return;}r=new s(t);};p(s.prototype,{_init:function(){i.subscribe('ComposerXStatusAttachment/ready',function(){if(this.config.show_audience){this._sendEducationRequest({},'/ajax/composer/audience/education',this._handlerCustomDuration.bind(this,6000));this.config.show_audience=false;}}.bind(this));if(this.config.show_sticky)i.subscribe('composer/mutate',function(t,u){this._sendEducationRequest({sticky_num:this.config.n_sticky_shown},'/ajax/composer/audience/sticky_education');}.bind(this));if(this.config.show_tags)i.subscribe('SelectedPrivacyOption/changed',function(t,u){this._sendEducationRequest({ids:u.tags,from:'WithTagger',hasEvent:u.hasEvent,type:u.privacy,tag_num:this.config.n_tag_shown},'/ajax/composer/audience/tag_education',this._handler.bind(this));}.bind(this));n.subscribe('open',this._killAnim.bind(this));},_sendEducationRequest:function(t,u,v){if(!this._updateDialogContext())return;this._async&&this._async.abort();this._async=new j(u);this._async.setData(t).setHandler(v).send();},_updateDialogContext:function(){var t=k.scry(document.body,'div.composerAudienceWrapper'),u,v;for(var w=0;w<t.length;w++){u=t[w];v=o.getElementPosition(u);if(u&&v.x>0&&v.y>0){this._dialog.setContext(u);return true;}}return false;},_handler:function(t){this._handlerCustomDuration(1500,t);},_handlerCustomDuration:function(t,u){var v=u.payload;if(!v||!this._updateDialogContext())return;var w=this._dialog.getContent().firstChild;k.setContent(w,v);g.announce(q(w));this._dialog.show();var x=m.byClass(w,'metaComposerUserEd');if(this._anim){this._anim.stop();this._anim=new h(x);}else this._anim=new h(x).from('opacity',0);this._anim.to('opacity',1).ease(l.sineOut).checkpoint().duration(t).checkpoint().to('opacity',0).ease(l.sineOut).checkpoint().ondone(this._killAnim.bind(this)).go();},_killAnim:function(t,u){if(this._anim){this._dialog.hide();this._anim.stop();this._anim=null;}}});e.exports=s;},null);
__d("PrivacySelectorOptionNew",["CSS","DOM","DOMQuery","JSXDOM","MenuSelectableItem","PrivacyConst","csx","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){for(var p in k)if(k.hasOwnProperty(p))r[p]=k[p];var q=k===null?null:k.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=k;function r(s){"use strict";k.call(this,s);this.updateAfterTagExpansion(this._data.hasTags);}r.prototype.getTooltip=function(){"use strict";return this._data.tooltip;};r.prototype.getPostParam=function(){"use strict";return this._data.postParam;};r.prototype.getTriggerIcon=function(){"use strict";return this._data.triggerIcon;};r.prototype.isPublic=function(){"use strict";return this.getPostParam()===l.PostParam.EVERYONE;};r.prototype.isFriends=function(){"use strict";return this.getPostParam()===l.PostParam.FRIENDS;};r.prototype.isOnlyMe=function(){"use strict";return this.getPostParam()===l.PostParam.ONLY_ME;};r.prototype.isBasicOption=function(){"use strict";return true;};r.prototype.isCustomOption=function(){"use strict";return false;};r.prototype.getTagExpansionBehavior=function(){"use strict";return this._data.tagExpansionBehavior;};r.prototype.getBaseValue=function(){"use strict";return this._data.baseValue;};r.prototype.getIndex=function(){"use strict";return this._data.value;};r.prototype.getLoggingEventName=function(){"use strict";switch(this.getPostParam()){case l.PostParam.FRIENDS:return 'click_friends';case l.PostParam.EVERYONE:return 'click_everyone';case l.PostParam.ONLY_ME:return 'click_only_me';case l.PostParam.FRIENDS_MINUS_ACQUAINTANCES:return 'click_friends_except_acquaintances';case l.PostParam.FB_ONLY:return 'click_fb_only';default:return 'click_other';}};r.prototype.updateAfterTagExpansion=function(s){"use strict";var t=this._data.baseLabel;if(s&&this._data.showPlusOnTagExpansion)t=o._("{privacyLabel} (+)",[o.param("privacyLabel",this._data.baseLabel)]);this._setLabel(t);if(s){this._setSubtitle(this._data.optionSubtitleWithTags);}else this._setSubtitle(this._data.optionSubtitle);};r.prototype.isBelowFold=function(){"use strict";var s=g.hasClass(this.getRoot(),"_3ey_");return s;};r.prototype._setLabel=function(s){"use strict";if(!s)return;var t=i.find(this.getRoot(),"._54nh");t&&h.setContent(t,s);this._data.label=s;};r.prototype._setSubtitle=function(s){"use strict";if(!s)return;var t=i.find(this.getRoot(),"._48u1");t&&h.setContent(t,s);};r.prototype.render=function(){"use strict";var s=q.render.call(this);if(!this._data.isPrimaryOption)return s;var t=i.find(s,"._54nc");t&&g.addClass(t,"_48t_");var u=h.find(s,"._54nh");u&&g.addClass(u,"_48u0");var v=j.div({className:"_48u1"},this._data.optionSubtitle);h.appendContent(t,v);return s;};e.exports=r;},null);
__d("XPrivacySelectorLoggingController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("\/privacy\/selector\/log\/",{event:{type:"Enum",required:true,enumType:1},render_location:{type:"Int",required:true},content_type:{type:"String",required:true}});},null);
__d("PrivacySelectorCustomOption",["AsyncDialog","AsyncRequest","DataStore","PrivacySelectorOptionNew","XPrivacySelectorLoggingController","XPrivacyCustomDialogController"],function(a,b,c,d,e,f,g,h,i,j,k,l){for(var m in j)if(j.hasOwnProperty(m))o[m]=j[m];var n=j===null?null:j.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=j;function o(p){"use strict";j.call(this,p);}o.prototype.isBasicOption=function(){"use strict";return false;};o.prototype.isCustomOption=function(){"use strict";return true;};o.prototype.getSelector=function(){"use strict";return this._selector;};o.prototype.setPostParam=function(p){"use strict";this._data.postParam=p;};o.prototype.getLoggingEventName=function(){"use strict";return 'click_custom';};o.prototype.openDialog=function(p){"use strict";if(typeof this._selector==='undefined')this._selector=p;i.set(this._data.id,'PrivacySelectorCustomOption',this);var q=l.getURIBuilder().setString('option_id',this._data.id).setString('id',this._data.privacyfbid.toString()).setString('post_param',p.getPostParam()).setString('content_type',p.getContentType()).setInt('render_location',p.getRenderLocation()).setIntVector('tags',p.getTags()).setBool('autosave',this._data.autosave).setBool('limit_community',this._data.limitcommunity).setBool('limit_facebook',this._data.limitfacebook).setBool('limit_fof',this._data.limitfof).setBool('limit_tagexpand',this._data.limittagexpand).setBool('is_new_privacy_selector',true).setString('tag_expansion_button',p.getTagExpansionButton()).getURI(),r=new h(q);r.setRelativeTo(p.getTriggerButtonElement());g.send(r,function(s){var t=function(u){var v=k.getURIBuilder().setEnum('event',u).setInt('render_location',document.getElementsByName('render_location')[0].value).setString('content_type',document.getElementsByName('content_type')[0].value).getURI();new h().setURI(v).send();};s.subscribe('hide',function(){p.inform('custom/hide');p.inform('selectorFinished');});s.subscribe('success',function(){p.inform('custom/success');t('custom_save');});s.subscribe('cancel',function(){p.inform('custom/cancel');t('custom_cancel');});});};o.customPrivacySave=function(p,q,r){"use strict";var s=i.get(p,'PrivacySelectorCustomOption');s.getSelector().updateDataForItemIndex(s.getIndex(),q,r);s.getSelector().setValue(s.getIndex());i.remove(p,'PrivacySelectorCustomOption');};e.exports=o;},null);
__d("PrivacySelectableMenu",["AsyncRequest","CSS","Ease","PrivacySelectorCustomOption","PrivacySelectorOptionNew","SelectableMenu","SelectableMenuUtils","XPrivacySelectorLoggingController","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){for(var p in l)if(l.hasOwnProperty(p))r[p]=l[p];var q=l===null?null:l.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=l;function r(s,t){"use strict";l.call(this,s,t);}r.prototype.getItemForIndex=function(s){"use strict";for(var t=0;t<this._items.length;t++){var u=this._items[t];if(u instanceof k&&u.getIndex()==s)return u;}return null;};r.prototype.selectDefaultOption=function(){"use strict";this._items.some(function(s){if(s instanceof k&&this._isDefaultOption(s)){this.setValue(s.getIndex());return true;}return false;},this);};r.prototype.selectOption=function(s){"use strict";var t=null,u=this._items.some(function(v){if(v instanceof k&&!v.isCustomOption()&&v.getPostParam()==s){this.setValue(v.getIndex());return true;}if(v instanceof j){t=v;return false;}if(this._isMoreOption(v)){this.expandMenu();return false;}},this);if(!u&&t){t.setPostParam(s);this.setValue(t.getIndex());}};r.prototype._isDefaultOption=function(s){"use strict";return h.hasClass(s.getRoot(),"_plx");};r.prototype._isMoreOption=function(s){"use strict";return h.hasClass(s.getRoot(),"_po2");};r.prototype._handleItemClick=function(s,t){"use strict";if(!m.doesItemSupportSelect(s))return q._handleItemClick.call(this,s,t);if(this._isMoreOption(s)){this._logMoreClick();this.expandMenu();return;}this._logOptionClick(s);var u=this.inform('itemclick',{item:s,event:t});if(u)return;if(!m.isSelected(s)&&!s.isCustomOption()&&s.select()!==false){this._items.forEach(function(v){if(m.isSelected(v)&&v!==s)v.deselect();});this.inform('change',this.getSelection());}this.done();return s.handleClick();};r.prototype._logMoreClick=function(){"use strict";var s=n.getURIBuilder().setEnum('event','more_options').setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new g().setURI(s).send();};r.prototype._logOptionClick=function(s){"use strict";var t=n.getURIBuilder().setEnum('event',s.getLoggingEventName()).setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new g().setURI(t).send();};r.prototype.expandMenu=function(){"use strict";h.removeClass(this.getRoot(),"_po3");h.addClass(this.getRoot(),"_po4");this.inform('expandMenu');};r.prototype.collapseMenu=function(){"use strict";h.removeClass(this.getRoot(),"_po4");h.addClass(this.getRoot(),"_po3");};r.prototype.updateOptionsAfterTagExpansion=function(s){"use strict";this.forEachItem(function(t){if(t instanceof k)t.updateAfterTagExpansion(s);});};r.prototype.onPopoverOpen=function(s){"use strict";if(this._config.learnMore)this._config.learnMore.collapse();if(s&&s.isBelowFold()){this.expandMenu();}else this.collapseMenu();if(s&&this._items.indexOf(s)>=15)setTimeout(function(){this._scrollableArea.scrollToBottom(true,{duration:1000,ease:i.sineOut});}.bind(this),250);};e.exports=r;},null);
__d("PopoverButton",["DOM","DOMQuery","csx"],function(a,b,c,d,e,f,g,h,i){var j={setLabel:function(k,l){var m=h.find(k,"._55pe"),n=m.childNodes;for(var o=0;o<n.length;o++)if(h.isTextNode(n[o])){g.replace(n[o],l);return;}g.appendContent(m,l);}};e.exports=j;},null);
__d("PrivacySelectorDataStore",["ArbiterMixin","merge","PrivacySelectorNewDispatcher","KeyedCallbackManager"],function(a,b,c,d,e,f,g,h,i,j){var k=new j(),l=h(g,{get:function(m,n){k.executeOrEnqueue(m,n);},hasValueChanged:function(m){return !!k.getResource(m);}});i.register(function(m){if(m.selector_type){var n={};n[m.selector_type]={post_param:m.post_param,unique_id:m.unique_id};k.addResourcesAndExecute(n);l.inform('change');}});e.exports=l;},null);
__d("XPrivacySelectorTransitionDefaultController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("\/privacy\/selector\/transition_default\/",{post_param:{type:"String",required:true},render_location:{type:"Enum",required:true,enumType:0}});},null);
__d("XPrivacySelectorUpdateController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("\/privacy\/selector\/update\/",{privacy_fbid:{type:"String",required:true},post_param:{type:"String",required:true},tags:{type:"IntVector"},render_location:{type:"Int",required:true},is_saved_on_select:{type:"Bool",defaultValue:false},should_return_tooltip:{type:"Bool",defaultValue:false},replace_on_select:{type:"Bool",defaultValue:false},prefix_tooltip_with_app_privacy:{type:"Bool",defaultValue:false},ent_id:{type:"String",required:true},tag_expansion_button:{type:"String"},reload_selector:{type:"Bool",defaultValue:false}});},null);
__d("PrivacySelectorBase",["ArbiterMixin","AsyncRequest","Button","CSS","CurrentUser","Input","MenuStaticItem","MenuSelectableItem","PopoverButton","PopoverLoadingMenu","PrivacyConst","DataStore","PrivacySelectorNewDispatcher","PrivacySelectorDataStore","PrivacySelectableMenu","TagExpansionButtonConfig","Tooltip","XPrivacySelectorLoggingController","XPrivacySelectorTransitionDefaultController","XPrivacySelectorUpdateController","bind","cx","fbt","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){var ea=3,fa=da(g);for(var ga in fa)if(fa.hasOwnProperty(ga))ia[ga]=fa[ga];var ha=fa===null?null:fa.prototype;ia.prototype=Object.create(ha);ia.prototype.constructor=ia;ia.__superConstructor__=fa;function ia(ja,ka,la,ma,na,oa){"use strict";r.set(ja,'selector',this);this._root=ja;this._button=ka;this._config=oa;this._menu=la;this._popoverMenu=na;this._input=ma;this._isSavedOnSelect=oa.is_saved_on_select;this._privacyFBID=oa.privacy_fbid;this._contentType=oa.content_type;this._renderLocation=oa.render_location;this._supportsTagExpansion=oa.supports_tag_expansion;this._prefixTooltipApps=oa.should_prefix_tooltip_apps;this._shouldDisplayLabel=oa.should_display_label;this._tags=oa.tagged_uids;this._hasTags=this._tags.length>0;this._entID=oa.ent_id;this._popover=this._popoverMenu.getPopover();this._receivingUpdate=false;this._initTagExpansionButtonState();this._selectorSyncKey=oa.selector_sync_key;if(oa.use_async_menu){this._popoverMenu.subscribe('setMenu',function(){this._menu=this._popoverMenu.getMenu();if(!(this._menu instanceof u))return;this._onMenuLoad();this._onPopoverOpen();this.inform('asyncMenuLoaded');}.bind(this));}else this._onMenuLoad();if(this._selectorSyncKey)this._initSelectorSync();}ia.prototype._initSelectorSync=function(){"use strict";t.subscribe('change',function(){t.get(this._selectorSyncKey,function(ja){if(ja.unique_id!==this._menu._config.id){this._receivingUpdate=true;this.selectOption(ja.post_param);this.isComposerWithDefault()&&this.reloadSelector();}}.bind(this));}.bind(this));if(!this._syncsToDefault())this._menu.subscribe('change',function(){this._broadcastUpdate();}.bind(this));};ia.prototype._broadcastUpdate=function(){"use strict";if(!this._receivingUpdate){var ja=this._getSelectedOption();s.handleUpdateFromSelector({selector_type:this._selectorSyncKey,post_param:ja.getPostParam().toString(),unique_id:this._menu._config.id});}else this._receivingUpdate=false;};ia.prototype.isComposerWithDefault=function(){"use strict";return this._syncsToDefault()&&!this._config.replace_on_select;};ia.prototype._isSelectorForChangingComposerDefault=function(){"use strict";return this._syncsToDefault&&this._config.replace_on_select;};ia.prototype._syncsToDefault=function(){"use strict";return this._config.selector_sync_key==q.PrivacyField.DEFAULT_COMPOSER.toString();};ia.prototype.getIsPublicSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isPublic();};ia.prototype.getIsFriendsSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isFriends();};ia.prototype.getIsOnlyMeSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isOnlyMe();};ia.prototype.getSelectedBaseValue=function(){"use strict";return this._selectedOption&&this._selectedOption.getBaseValue();};ia.prototype.getSelectedPostParam=function(){"use strict";return this._selectedOption&&this._selectedOption.getPostParam().toString();};ia.prototype.setValue=function(ja){"use strict";this._menu.setValue(ja);};ia.prototype.openSelectorExpanded=function(ja){"use strict";this.openSelector(function(){this._menu.expandMenu();ja&&ja();}.bind(this));};ia.prototype.openSelector=function(ja){"use strict";if(this._menu instanceof p){this.subscribeOnce('asyncMenuLoaded',function(){ja&&ja();}.bind(this));this._popover.showLayer();}else{this._popover.showLayer();ja&&ja();}};ia.prototype.closeSelector=function(){"use strict";this._popover.hideLayer();};ia.prototype.getPopover=function(){"use strict";return this._popover;};ia.prototype.getTriggerButtonElement=function(){"use strict";return this._button;};ia.prototype.getMenuElement=function(){"use strict";return this._menu.getRoot();};ia.prototype.selectDefaultOption=function(){"use strict";this._menu.selectDefaultOption();this._updateMenu();};ia.prototype.selectOption=function(ja){"use strict";if(!ja)return;if(this._menu instanceof p){this.subscribeOnce('asyncMenuLoaded',this._selectOptionImpl.bind(this,ja));this._fetchAsyncMenu();}else this._selectOptionImpl(ja);};ia.prototype._selectOptionImpl=function(ja){"use strict";this._menu.selectOption(ja);this._updateMenu();};ia.prototype._updateMenu=function(){"use strict";this._selectedOption=this._getSelectedOption();this.updateDataForItemIndex(this._selectedOption.getIndex(),this._selectedOption.getPostParam().toString());};ia.prototype.setTagExpansionButton=function(ja){"use strict";this._tagExpansionButton=ja;if(this._hasTags){this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion());this._updateTriggerButtonLabel();this._updateTooltipAfterChange();}};ia.prototype.getTagExpansionButton=function(){"use strict";return this._tagExpansionButton;};ia.prototype._initTagExpansionButtonState=function(){"use strict";this._tagExpansionButton=v.FRIENDS_OF_TAGGED;var ja=this._getSelectedOption();if(!ja)return;var ka=JSON.parse(ja.getPostParam());if(ka.settings&&ka.settings.no_tag_expansion===true){this._tagExpansionButton=v.TAGGED_ONLY;}else this._tagExpansionButton=v.FRIENDS_OF_TAGGED;};ia.prototype._fetchAsyncMenu=function(){"use strict";if(this._config.use_async_menu)this._popoverMenu.fetchMenu();};ia.prototype._getSelectedOption=function(){"use strict";if(!(this._menu instanceof u))return;var ja;this._menu.forEachItem(function(ka){if(ka instanceof n&&ka.isSelected())ja=ka;}.bind(this));return ja;};ia.prototype._onItemClick=function(ja,ka){"use strict";var la=ka.item;if(la instanceof m)return;if(la.isBasicOption()){this.updateDataForItemIndex(la.getIndex(),la.getPostParam().toString());}else if(la.isCustomOption()){this._closeForCustom=true;la.openDialog(this);}this.inform('click',{customSelected:la.isCustomOption()});};ia.prototype.getContentType=function(){"use strict";return this._contentType;};ia.prototype.getRenderLocation=function(){"use strict";return this._renderLocation;};ia.prototype.getPostParam=function(){"use strict";return this._postParam;};ia.prototype.getTags=function(){"use strict";return this._tags;};ia.prototype.updateDataForItemIndex=function(ja,ka,la){"use strict";if(la){this._tagExpansionButton=la;this.inform('CustomTagExpansion',this._tagExpansionButton);}var ma=this._menu.getItemForIndex(ja);if(ma.isCustomOption())ma.setPostParam(ka);this._selectedOption=ma;this._postParam=ka;l.setValue(this._input,ka);this._updateTriggerButtonLabel();if(this._shouldUpdateTooltips()){this._updateTooltipAfterChange();}else{if(this._isSavedOnSelect)this._savePrivacy();this._setTooltipValue(this._selectedOption.getTooltip());}this.inform('changed',{post_param:this._postParam,base_value:this.getSelectedBaseValue()});};ia.prototype._shouldUpdateTooltips=function(){"use strict";return this._prefixTooltipApps||this._supportsTagExpansion;};ia.prototype._savePrivacy=function(){"use strict";this._sendUpdateRequest();};ia.prototype.reloadSelector=function(){"use strict";var ja=z.getURIBuilder().setString('privacy_fbid',String(this._privacyFBID)).setString('post_param',this._postParam).setInt('render_location',this._renderLocation).setBool('reload_selector',true).setString('ent_id',String(this._entID)).getURI();new h().setRelativeTo(this._root).setHandler(this.inform.bind(this,'reloaded')).setURI(ja).send();};ia.prototype.transitionToDefault=function(){"use strict";var ja=y.getURIBuilder().setString('post_param',this._postParam).setEnum('render_location',this._renderLocation).getURI();new h().setRelativeTo(this._root).setHandler(function(){this._config.selector_sync_key=q.PrivacyField.DEFAULT_COMPOSER.toString();this._initSelectorSync();this.inform.bind(this,'reloaded');}.bind(this)).setURI(ja).send();};ia.prototype._sendUpdateRequest=function(){"use strict";var ja=z.getURIBuilder().setString('privacy_fbid',String(this._privacyFBID)).setString('post_param',this._postParam).setIntVector('tags',this._tags).setInt('render_location',this._renderLocation).setBool('is_saved_on_select',this._isSavedOnSelect).setBool('should_return_tooltip',this._shouldUpdateTooltips()).setBool('prefix_tooltip_with_app_privacy',this._prefixTooltipApps).setBool('replace_on_select',this._config.replace_on_select).setString('ent_id',String(this._entID)).setString('tag_expansion_button',this._tagExpansionButton).getURI();new h().setRelativeTo(this._button).setHandler(aa(this,function(ka){if(this._isSelectorForChangingComposerDefault())this._broadcastUpdate();var la=ka&&ka.payload&&ka.payload.tooltip;la&&this._setTooltipValue(ka.payload.tooltip);})).setURI(ja).send();};ia.prototype.informTagsChanged=function(ja){"use strict";var ka=this._getTags(ja);this.informTagsChangedWithIDs(ka);};ia.prototype.informTagsChangedWithIDs=function(ja){"use strict";var ka=!ja.length;if(this._hasTags===ka){this._hasTags=!!ja.length;this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion());this._updateTriggerButtonLabel();}if(this._tags.length!==ja.length){this._tags=ja;this._updateTooltipAfterChange();}};ia.prototype._showTagExpansion=function(){"use strict";return this._hasTags&&(this._tagExpansionButton.valueOf()===v.FRIENDS_OF_TAGGED.valueOf());};ia.prototype._getTags=function(ja){"use strict";var ka=[],la=k.getID();if(ja.withTags)for(var ma=0;ma<ja.withTags.length;ma++){var na=ja.withTags[ma].info;if(na.uid!=la)ka.push(na.uid);}if(ja.mention)for(var oa in ja.mention)if(ja.mention[oa].type=='user'&&ja.mention[oa].uid!=la)ka.push(ja.mention[oa].uid);return ka;};ia.prototype._updateTriggerButtonLabel=function(){"use strict";var ja=this._selectedOption.getTriggerIcon();i.setIcon(this._button,ja.cloneNode());if(!this._shouldDisplayLabel)return;o.setLabel(this._button,this._selectedOption.getLabel());if(this._config.trigger_style===ea){j.conditionClass(this.getTriggerButtonElement(),"_mw-",this.getIsOnlyMeSelected());j.conditionClass(this.getTriggerButtonElement(),"_mw_",this.getIsPublicSelected());}};ia.prototype._updateTooltipAfterChange=function(){"use strict";var ja="Loading...";this._setTooltipValue(ja);this._sendUpdateRequest();};ia.prototype._setTooltipValue=function(ja){"use strict";ja&&w.set(this._button,ja);};ia.prototype._onPopoverClose=function(){"use strict";if(!this._getSelectedOption())return;if(this._closeForCustom){this._closeForCustom=false;}else this.inform('selectorFinished');this.inform('close');};ia.prototype._onPopoverOpen=function(){"use strict";if(!(this._menu instanceof u))return;this._menu.onPopoverOpen(this._getSelectedOption());var ja=x.getURIBuilder().setEnum('event','opened').setInt('render_location',this._renderLocation).setString('content_type',this._contentType).getURI();new h().setURI(ja).send();this.inform('open');};ia.prototype._onMenuLoad=function(){"use strict";this._menu.subscribe('itemclick',this._onItemClick.bind(this));this._popover.subscribe('hide',this._onPopoverClose.bind(this));this._popover.subscribe('show',this._onPopoverOpen.bind(this));this._menu.subscribe('expandMenu',function(){if(this._popover&&this._popover.getLayer())this._popover.getLayer().updatePosition();}.bind(this));this._selectedOption=this._getSelectedOption();if(this._selectedOption){this._postParam=this._selectedOption.getPostParam().toString();this._hasTags&&this._updateTriggerButtonLabel();}};e.exports=ia;},null);
__d("CurationCaretNux",["csx","cx","ge","tidyEvent","AsyncRequest","CSS","DataStore","DOM","Event","Parent","Rect"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r="div._1zpr",s="_5jmm",t='CurationCaretNux_instance',u='CurationCaretNux_caretMenuLoaded',v=100,w="caret_nux",x="save_option_nux",y="seen",z="dismissed",aa="focus",ba="click",ca="scroll",da=false;function ea(fa,ga,ha,ia){"use strict";var ja=i(ia);if(ja){this.container=ja;this.caret=ha;this.caretNux=fa.instance;this.caretNuxData=fa;this.saveOptionNux=ga.instance;this.saveOptionNuxData=ga;this.popoverTriggered=false;var ka=p.byClass(ja,s);m.set(ka,t,this);this.$CurationCaretNux0();}}ea.prototype.$CurationCaretNux0=function(){"use strict";var fa=n.scry(this.container,r);if(fa.length>0)j([o.listen(fa[0],'click',function(){if(da)return;this.caretNux.subscribe('show',function(){this.$CurationCaretNux1();}.bind(this));this.caretNux.subscribe('hide',function(){this.$CurationCaretNux2();if(da){this.$CurationCaretNux3(w,y);this.$CurationCaretNux3(w,z);}}.bind(this));this.$CurationCaretNux4();this.interactionTime=0;setTimeout(function(){if(!this.$CurationCaretNux5()){da=true;this.caretNux.show();}}.bind(this),this.caretNuxData.min_consume_duration);setTimeout(function(){if(!this.$CurationCaretNux5()){da=false;this.caretNux.hide();}}.bind(this),this.caretNuxData.max_consume_duration);var ga=Date.now();setTimeout(function(){this.$CurationCaretNux6(function(){if(!this.interactionTime)this.interactionTime=Date.now()-ga;}.bind(this));}.bind(this),0);}.bind(this))]);};ea.prototype.$CurationCaretNux5=function(){"use strict";return this.interactionTime&&this.interactionTime>0;};ea.prototype.$CurationCaretNux1=function(){"use strict";this.caretClickListener=o.listen(this.caret,'click',function(){this.caretNux.hide();if(this.saveOptionNux){this.popoverTriggered=true;this.$CurationCaretNux7();}}.bind(this));var fa=false;this.$CurationCaretNux6(function(ga){if(fa||ga===ba||!this.caretNux.isShown())return;var ha=q.getViewportWithoutScrollbarsBounds(),ia=q.getElementBounds(this.caretNux.getContentRoot());ia=ia.sub(0,v);if(ha.contains(ia)){this.$CurationCaretNux3(w,y);fa=true;}}.bind(this));};ea.prototype.$CurationCaretNux2=function(){"use strict";this.caretClickListener.remove();this.$CurationCaretNux8();};ea.prototype.$CurationCaretNux7=function(){"use strict";if(this.$CurationCaretNux9()&&this.popoverTriggered)setTimeout(function(){var fa=n.scry(document,"li.save_caret_menu_item");for(var ga=0;ga<fa.length;ga++){var ha=fa[ga],ia=p.byClass(ha,"uiLayer");if(ia&&l.shown(ia)){this.saveOptionNux.setContext(ha);break;}}this.saveOptionNux.show();this.$CurationCaretNux3(x,y);var ja=m.get(this.caret,'Popover');ja&&ja.subscribeOnce('hide',function(){this.saveOptionNux.hide();}.bind(this));}.bind(this),0);};ea.prototype.$CurationCaretNux3=function(fa,ga){"use strict";var ha;if(fa===w){ha=this.caretNuxData;}else if(fa===x){ha=this.saveOptionNuxData;}else throw "Invalid nux type";var ia;if(ga===y){ia=ha.seen_uri;ha.seen_uri=null;}else if(ga===z){ia=ha.dismiss_uri;ha.dismiss_uri=null;}else throw "Invalid impression type";if(ia){var ja=new k(ia);if(this.interactionTime&&fa===w)ja.setData({interaction_time:this.interactionTime});ja.send();}};ea.prototype.$CurationCaretNux6=function(fa){"use strict";this.$CurationCaretNuxa.push(fa);};ea.prototype.$CurationCaretNuxb=function(fa){"use strict";this.$CurationCaretNuxa.forEach(function(ga){ga.call(this,fa);},this);};ea.prototype.$CurationCaretNux4=function(){"use strict";if(!this.$CurationCaretNuxc){this.$CurationCaretNuxa=[];this.$CurationCaretNuxc=[o.listen(window,'click',this.$CurationCaretNuxb.bind(this,ba)),o.listen(window,'focus',this.$CurationCaretNuxb.bind(this,aa)),o.listen(window,'scroll',this.$CurationCaretNuxb.bind(this,ca))];}};ea.prototype.$CurationCaretNux8=function(fa){"use strict";if(this.$CurationCaretNuxc){while(this.$CurationCaretNuxc.length)this.$CurationCaretNuxc.pop().remove();this.$CurationCaretNuxc=null;this.$CurationCaretNuxa=null;}};ea.prototype.$CurationCaretNux9=function(){"use strict";var fa=p.byClass(this.container,s);return m.get(fa,u)===true;};ea.saveOptionLoaded=function(fa){"use strict";var ga=i(fa);if(ga){var ha=p.byClass(ga,s);m.set(ha,u,true);var ia=m.get(ha,t);ia&&ia.$CurationCaretNux7();}};e.exports=ea;},null);
__d("SaveState",[],function(a,b,c,d,e,f){var g={SAVING:'saving',SAVED:'saved',UNSAVING:'unsaving',UNSAVED:'unsaved'};e.exports=g;},null);
__d("SaveStateHandler",["Run","SaveState"],function(a,b,c,d,e,f,g,h){var i=null;function j(){"use strict";this.$SaveStateHandler0={};this.$SaveStateHandler1={};g.onLeave(function(){i=null;});}j.prototype.addListener=function(k,l){"use strict";k.forEach(function(m){if(!this.$SaveStateHandler0[m])this.$SaveStateHandler0[m]=[];this.$SaveStateHandler0[m].push(l);},this);};j.prototype.setState=function(k,l){"use strict";k.forEach(function(m){this.$SaveStateHandler1[m]=l;if(!this.$SaveStateHandler0[m])return;var n=this.$SaveStateHandler0[m];n.forEach(function(o){try{o.call(window,l,m);}catch(p){}});},this);};j.prototype.getState=function(k){"use strict";var l={};k.forEach(function(m){l[m]=this.$SaveStateHandler1[m];},this);return l;};j.$SaveStateHandler2=function(){"use strict";if(!i)i=new j();return i;};j.listen=function(k,l){"use strict";this.$SaveStateHandler2().addListener(k,l);};j.getState=function(k){"use strict";this.$SaveStateHandler2().getState(k);};j.saving=function(k){"use strict";this.$SaveStateHandler2().setState(k,h.SAVING);};j.saved=function(k){"use strict";this.$SaveStateHandler2().setState(k,h.SAVED);};j.unsaving=function(k){"use strict";this.$SaveStateHandler2().setState(k,h.UNSAVING);};j.unsaved=function(k){"use strict";this.$SaveStateHandler2().setState(k,h.UNSAVED);};j.isSaveAction=function(k){"use strict";var l=this.$SaveStateHandler2().getState(k);for(var m in l){var n=l[m];if(n==h.UNSAVED||n==h.UNSAVING)return true;}return false;};e.exports=j;},null);
__d("SaveCaretMenuItem",["Banzai","CSS","DOM","EntstreamFeedObject","EntstreamFeedObjectFollowup","Event","MenuItem","SaveState","SaveStateHandler","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r='saved_for_later:caret_action',s='click',t='imp';for(var u in m)if(m.hasOwnProperty(u))w[u]=m[u];var v=m===null?null:m.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=m;function w(x){"use strict";m.call(this,x);this._updateData();this.getRoot();l.listen(this._anchor,'error',this.handleError.bind(this));o.listen(x.ogobjectids,function(y){this._updateData();this._doRender(y);}.bind(this));}w.prototype.handleClick=function(){"use strict";var x=v.handleClick.call(this),y=this._data.logdata;g.post(r,{action:s,collection_id:y.collection_id,surface:y.surface,story_id:y.story_id,is_save:this._data.isSaveAction,is_multi:y.is_multi});var z=j.getRoot(q(this._data.storydomid));if(this._data.isSaveAction){o.saving(this._data.ogobjectids);z&&k.addFollowup(z,this._data.savefollowupmarkup,"_521o");}else{o.unsaving(this._data.ogobjectids);var aa=k.getFollowup(z);aa&&k.removeFollowup(z);}return x;};w.prototype.handleError=function(){"use strict";if(this._data.isSaveAction){o.saved(this._data.ogobjectids);}else o.unsaved(this._data.ogobjectids);};w.prototype._updateData=function(){"use strict";this._data.isSaveAction=o.isSaveAction(this._data.ogobjectids);if(this._data.isSaveAction){this._data.markup=this._data.savemarkup;this._data.ajaxify=this._data.saveajaxify;this._data.title=this._data.savetitle;}else{this._data.markup=this._data.unsavemarkup;this._data.ajaxify=this._data.unsaveajaxify;this._data.title=this._data.unsavetitle;}};w.prototype._doRender=function(x){"use strict";if(!this._root)return;switch(x){case n.SAVING:case n.UNSAVING:h.addClass(this._root,"_5arm");setTimeout(this.disable.bind(this),10);break;case n.SAVED:case n.UNSAVED:h.removeClass(this._root,"_5arm");setTimeout(this.enable.bind(this),10);break;}i.replace(this._anchor,this._renderItemContent());l.listen(this._anchor,'error',this.handleError.bind(this));};w.prototype.onShow=function(){"use strict";var x=this._data.logdata;g.post(r,{action:t,collection_id:x.collection_id,surface:x.surface,story_id:x.story_id,is_save:this._data.isSaveAction,is_multi:x.is_multi});};e.exports=w;},null);
__d("FbFeedOptionsExpander",["BanzaiLogger","CSS","DOM","Event"],function(a,b,c,d,e,f,g,h,i,j){var k={expand:function(l){var m=l.expander,n=l.menu,o=l.foldedClass,p=l.unfoldedClass,q=l.foldedItemClass,r=l.data;j.listen(m,'click',function(){h.toggleClass(n.getRoot(),o);h.toggleClass(n.getRoot(),p);var s=i.scry(n.getRoot(),'li.'+q);s.forEach(function(t){var u=t.getAttribute('data-feed-option-name');if(u)g.log('FeedStoryOptionMenuLoggerConfig',{option_name:u,is_secondary:1,event_type:'imp',feed_location:r.location,session_id:r.session_id,is_sponsored:r.is_sponsored,is_self_story:r.is_self_story});},this);});}};e.exports=k;},null);